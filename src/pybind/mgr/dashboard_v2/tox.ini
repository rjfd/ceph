[tox]
envlist = py27,py3,lint
skipsdist = true

[testenv:py27]
deps=-r{toxinidir}/requirements.txt
setenv=
    UNITTEST=true
    WEBTEST_INTERACTIVE=false
commands=
    {envbindir}/py.test --cov=. --cov-report=term tests/

[testenv:py3]
deps=-r{toxinidir}/requirements.txt
setenv=
    UNITTEST=true
    WEBTEST_INTERACTIVE=false
commands=
    {envbindir}/py.test --cov=. --cov-report=term --cov-report=xml --junitxml=junit.xml tests/

[testenv:lint]
deps=
    pylint
    pycodestyle
commands=
    pylint --rcfile=.pylintrc --jobs=5 .
    pycodestyle --max-line-length=100 --exclude=ceph_module_mock.py,python2.7,tests,.tox,venv .

